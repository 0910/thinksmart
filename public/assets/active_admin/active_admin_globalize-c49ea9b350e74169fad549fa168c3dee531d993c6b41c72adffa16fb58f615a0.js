(function(){$(function(){var t;return t=function(){var t,e;return e=function(t){var e;return e=t.find(".add-locale ul li:not(.hidden)"),0===e.length?t.find(".add-locale").hide():t.find(".add-locale").show()},t=function(t,e){var i;return i=t.parents("ul").find('.add-locale li:has(a[href="'+t.attr("href")+'"])'),e?(t.addClass("hidden").show().removeClass("hidden"),i.hide().addClass("hidden")):(t.addClass("hidden").hide().addClass("hidden"),i.show().removeClass("hidden"))},$(".activeadmin-translations > ul").each(function(){var i,n,s,o,r,a,l,c;if(s=$(this),c=s.hasClass("locale-selector"),!s.data("ready")){if(s.data("ready",!0),a=$("li > a",this),n=c?$(this).siblings("div.field-translation"):$(this).siblings("fieldset"),a.click(function(t){var e;return e=$(this),a.not(e).removeClass("active"),e.addClass("active"),n.hide(),n.filter(e.attr("href")).show(),t.preventDefault()}),a.eq(0).click(),c)return;return l=[],a.not(".default").each(function(){return l.push($("<li></li>").append($(this).clone().removeClass("active")))}),i=$('<li class="add-locale"><a href="#">+</a></li>'),i.append($("<ul></ul>").append(l)),i.find("ul a").click(function(i){var n,o;return o=$(this).attr("href"),n=a.filter('[href="'+o+'"]'),t(n,!0),n.click(),e(s),i.preventDefault()}),r=$('<span class="remove">x</span>').click(function(i){var n;return i.stopImmediatePropagation(),i.preventDefault(),n=$(this).parent(),t(n,!1),n.hasClass("active")&&a.not(".hidden").eq(0).click(),e(s)}),a.not(".default").append(r),s.append(i),a.each(function(){var e,i,s,o;return i=$(this),e=n.filter(i.attr("href")),s=e.find(".input.error").length>0,i.toggleClass("error",s),o=!0,i.hasClass("error")||i.hasClass("default")?o=!1:e.find("[name]").not('[type="hidden"]').each(function(){return $(this).val()?(o=!1,!1):void 0}),o?t(i,!1):t(i,!0)}),o=s.parents("form"),o.data("ready")||(o.data("ready"),o.submit(function(){return $(".activeadmin-translations > ul").each(function(){var t;return t=$(this).siblings("fieldset"),$("li:not(.add-locale) > a",this).each(function(){var e,i,n;return $(this).hasClass("hidden")?(e=$("fieldset"+$(this).attr("href")),n=$("input[id$=_id]",e),n.val()?(i=$("<input/>").attr({type:"hidden",name:n.attr("name").replace("[id]","[_destroy]"),id:n.attr("id").replace("_id","_destroy"),value:"1"}),i.appendTo(e)):t.filter($(this).attr("href")).remove()):void 0})})})),e(s),a.filter(".default").click()}})},$("a").bind("click",function(){return setTimeout(function(){return t()},50)}),$("a.ui-translation-trigger").click(function(t){var e,i;return e=$(this).data("locale"),i=$(this).closest("td"),$(".field-translation",i).hide(),$(".locale-"+e,i).show(),t.preventDefault()}),t()})}).call(this);